@using News.Domain.Entities.Reports
@using News.Domain.ViewModels.Reports
@using News.Application.Extensions
@using News.Application.Statics
@model GetReportForShow

@{
    ViewData["Title"] = "گزارش";

    var relatedReports = ViewData["RelatedReports"] as List<Report>;
}

<div class="container">
    <div class="row" style="margin-top: 50px;">
        <!-- Start Col-9 -->
        <div class="col-12 col-lg-9 mb-5">
            <div class="replace-digits bg-light-subtle border-style rounded p-5">
                <div class=" bg-light border my-3 mx-1">
                    <ul class="list-unstyled w-100 m-0">
                        <li class="item-top-report">
                            <svg class="svg-inline--fa fa-calendar-days px-2 icon-top-report" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="calendar-days" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm64 80v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm128 0v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H336zM64 400v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H208zm112 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H336c-8.8 0-16 7.2-16 16z"></path></svg><!-- <i class="fa fa-calendar-alt px-2 icon-top-report"></i> Font Awesome fontawesome.com -->
                            <span class="texticon-top-report"> زمان درج: </span>
                            <span class="texticon-top-report"> @Model.CreateDate.ToShamsiDateTime() </span>
                        </li>
                        <li class="item-top-report">
                            <svg class="svg-inline--fa fa-folder-open px-2 icon-top-report" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="folder-open" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg=""><path fill="currentColor" d="M88.7 223.8L0 375.8V96C0 60.7 28.7 32 64 32H181.5c17 0 33.3 6.7 45.3 18.7l26.5 26.5c12 12 28.3 18.7 45.3 18.7H416c35.3 0 64 28.7 64 64v32H144c-22.8 0-43.8 12.1-55.3 31.8zm27.6 16.1C122.1 230 132.6 224 144 224H544c11.5 0 22 6.1 27.7 16.1s5.7 22.2-.1 32.1l-112 192C453.9 474 443.4 480 432 480H32c-11.5 0-22-6.1-27.7-16.1s-5.7-22.2 .1-32.1l112-192z"></path></svg><!-- <i class="fa fa-folder-open px-2 icon-top-report"></i> Font Awesome fontawesome.com -->
                            <span class="texticon-top-report"> دسته بندی: </span>
                            <span class="texticon-top-report"> @Model.ReportGroup.GroupName </span>
                        </li>
                        <li class="item-top-report">
                            <svg class="svg-inline--fa fa-newspaper px-2 icon-top-report" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="newspaper" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M96 96c0-35.3 28.7-64 64-64H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H80c-44.2 0-80-35.8-80-80V128c0-17.7 14.3-32 32-32s32 14.3 32 32V400c0 8.8 7.2 16 16 16s16-7.2 16-16V96zm64 24v80c0 13.3 10.7 24 24 24H296c13.3 0 24-10.7 24-24V120c0-13.3-10.7-24-24-24H184c-13.3 0-24 10.7-24 24zm208-8c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16s-7.2-16-16-16H384c-8.8 0-16 7.2-16 16zm0 96c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16s-7.2-16-16-16H384c-8.8 0-16 7.2-16 16zM160 304c0 8.8 7.2 16 16 16H432c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16zm0 96c0 8.8 7.2 16 16 16H432c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16z"></path></svg><!-- <i class="fa fa-newspaper px-2 icon-top-report"></i> Font Awesome fontawesome.com -->
                            <span style="font-size: .7rem; color: rgb(245, 33, 57);"> کد خبر: </span>
                            <span class="texticon-top-report"> @Model.ReportId </span>
                        </li>
                        <li class="item-top-report">
                            <svg class="svg-inline--fa fa-microphone px-2 icon-top-report" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="microphone" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" data-fa-i2svg="">
                                <path fill="currentColor" d="M192 0C139 0 96 43 96 96V256c0 53 43 96 96 96s96-43 96-96V96c0-53-43-96-96-96zM64 216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 89.1 66.2 162.7 152 174.4V464H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h72 72c13.3 0 24-10.7 24-24s-10.7-24-24-24H216V430.4c85.8-11.7 152-85.3 152-174.4V216c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c0 70.7-57.3 128-128 128s-128-57.3-128-128V216z"></path></svg><!-- <i class="fa fa-microphone px-2 icon-top-report"></i> Font Awesome fontawesome.com -->
                            <span class="texticon-top-report"> منبع : </span>
                            <span class="texticon-top-report"> @Model.Source </span>
                        </li>
                        <li class="item-top-report">
                            <a onclick="printdiv()">
                                <svg class="svg-inline--fa fa-print px-2 icon-top-report" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="print" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                                    <path fill="currentColor" d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"></path></svg><!-- <i class="fa fa-print px-2 icon-top-report"></i> Font Awesome fontawesome.com -->
                                <span class="texticon-top-report"> چاپ </span>
                            </a>
                        </li>
                    </ul>
                </div>

                <section id="print_this">
                    <div>
                    @if (Model.ReportGroup.UrlName == "MultiMedia")
                    {
                            <video src="@(SiteTools.ReportImagesName + Model.Image)" preload="metadata" controls class="rounded img-main-report" title="@Model.ImageTitle" alt="@Model.ImageAlt"></video>
                    }
                    else
                    {
                            <img src="@(SiteTools.ReportImagesName + Model.Image)" class="rounded img-main-report" title="@Model.ImageTitle" alt="@Model.ImageAlt">
                    }
                    </div>

                    <div>
                        <p class="title-report">
                            @Model.Title
                        </p>
                        <p class="description-report">
                            @Model.Description
                        </p>
                        <div>
                            <span>
                                <p>
                                    @Html.Raw(Model.FullText)
                                </p>
                                <div class="d-inline-flex">
                                    <i class="fas fa-user-pen px-2 mt-1 icon-author-report"></i>
                                    <p class="text-author-report">نویسنده: @Model.Author</p>
                                </div>
                            </span>
                        </div>

                    </div>
                </section>

                <hr>
                <div class="col-12">
                    <div class="position-relative">
                        <div class="d-sm-inline-flex d-block">
                            <p class="share-text-report">اشتراک گذاری</p>
                        </div>
                        <div class="share position-absolute d-inline-flex end-0">
                            <a><img src="Assets/Img/Links/WhatsApp_4_11zon.png" class="rounded mx-1 shadow share-img-report"></a>
                            <a><img src="Assets/Img/Links/Telegram_2_11zon.png" class="rounded mx-1 shadow share-img-report"></a>
                            <a><img src="Assets/Img/Links/Instagram_11zon.jpg" class="rounded mx-1 shadow share-img-report"></a>
                            <a><img src="Assets/Img/Links/Twitter_3_11zon.png" class="rounded mx-1 shadow share-img-report"></a>
                        </div>
                    </div>
                </div>


            </div>

            div class="replace-digits rounded border-style my-3">
            <ul class="tags bg-light py-3 m-0">
                <li class="btn btn-primary btn-sm mb-1"> <i class="fa fa-tags"></i> برچسب ها </li>
                @if (Model.Tags != null)
                {
                    @foreach (var item in Model.Tags.Split("،"))
                    {
                        <li class="btn btn-secondery btn-sm mb-1"> <i class="fa fa-tags"></i> @item </li>
                    }
                }
                <li class="list-unstyled"> </li>
            </ul>
        </div>
            <!-- Start RelatedReports Line -->
        <div class="box">
            <h6 class="position-relative ">
                  <span class="Seda-Line-Color position-relative bg-body"> اخبار مرتبط </span>
            </h6>
        </div>
            <!-- End RelatedReports Line -->
            <!-- Start RelatedReports -->
            <!-- FlexSlider -->
        <div class="flexslider carousel">
            @if(relatedReports != null)
            {
                <ul class="slides">
                    @foreach (var item in relatedReports)
                    {
                        <li style="padding: 5px;">
                            <div style="background: #ccc; height: 330px; overflow: hidden">
                                <a asp-area="" asp-controller="report" asp-action="report" asp-route-reportId="@item.Id" class="" style="text-decoration:none;">
                                    @if (item.ReportGroup.UrlName == "MultiMedia")
                                    {
                                        <video src="@(SiteTools.ReportImagesName + Model.Image)" title="@Model.ImageTitle" alt="@Model.ImageAlt" preload="metadata" controls style=" height:240px;"></video>
                                    }
                                    else
                                    {
                                        <img src="@(SiteTools.ReportImagesName + Model.Image)" title="@Model.ImageTitle" alt="@Model.ImageAlt" style=" height:240px;" />
                                    }
                                    <p style="color: dimgray; padding: 10px; font-weight:bold; text-align: justify-all; border-top: 3px solid darkorange;"> @item.Title </p>
                                </a>
                            </div>
                        </li>
                    }
                </ul>
            }
        </div>
            <!-- End RelatedReports -->
            <!-- Start Comment-Form -->
            <div class="bg-body-tertiary p-3 rounded border-style">
                <div class="">
                    <svg class="svg-inline--fa fa-message px-2 commentalt-icon-report" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="message" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5L309.3 416H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64z"></path></svg><!-- <i class="fa fa-comment-alt px-2 commentalt-icon-report"></i> Font Awesome fontawesome.com -->
                    <p class="commenttext-style-report">نظرات کاربران در رابطه با این خبر</p>
                </div>
                <div class="comment-body-report">

                <form asp-area="" asp-controller="Report" asp-action="CreateReportComment" method="post" class="position-relative">
                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                        <p style="font-size: .8rem;">دیدگاه خود را بنویسید</p>
                    <input hidden="hidden" value="@Model.ReportId" name="ReportId" />
                        <div class="form-group">
                        <input name="Name" placeholder="نام شما" class="form-control">
                        </div>
                        <div class="form-group my-3">
                        <input name="Email" placeholder="پست الکترونیک" class="form-control">
                        </div>
                        <div class="form-group">
                        <textarea ckeditor="1" name="CommentText" placeholder="متن پیام" class="form-control"></textarea>
                        </div>
                        <div class="position-absolute d-inline-flex end-0">
                            <input type="submit" class="rounded btn btn-sm contact1-form-btn" value="ثبت دیدگاه شما">
                        </div>
                    </form>
                </div>
                <!-- End Comment-Form -->
                <!-- Start Comments -->
                <div class="section_tittle text-center my-5">
                    <h5>نظر کاربران</h5>
                </div>
                 @await Component.InvokeAsync("ReportCommentsComponent", new { reportId = Model.ReportId })
            </div>
            <!-- End Comments -->
        </div>

        <!--Start Col-3 -->
    <div class="col-12 d-none col-lg-3 d-lg-block ">
            <!-- Start Color-Palet -->
            <div class="row mb-5">
            <partial name="_ColorPalet" />
            </div>
            <!-- End Color-Palet -->
            <!-- Start Ad -->
            <div class="row mb-5">
            @await Component.InvokeAsync("AdsViewComponent")
            </div>
            <!-- End Ad -->
            <!-- LastNews -->
            <div class="my-3">
                <!-- Start LastNews -->
            @await Component.InvokeAsync("LastNewsReportsViewComponent")
                <!-- End LastNews -->
            </div>
            <!-- End LasrNews -->
    </div>
        <!--End Col-3 -->
</div>

@section Scripts{
    <partial name="_ValidationScriptsPartial" />
    <script>
        $(window).load(function () {
            $('.flexslider').flexslider({
                animation: "slide",
                animationLoop: true,
                itemWidth: 235,
                itemMargin: 5,
                smoothHeight: true,
                isFirefox: true,
                rtl: true
            });
        });
    </script>
}